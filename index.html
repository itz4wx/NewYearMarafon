<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –ú–∞—Ä–∞—Ñ–æ–Ω</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Pacifico&display=swap"
        rel="stylesheet">
    <style>
        /* Optimization: Reduce paint area for heavy animations */
        .game-card {
            will-change: transform, opacity;
        }

        /* Loading Screen Animations */
        @keyframes fadeInCenter {
            from {
                opacity: 0;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes moveUpTitle {
            from {
                transform: translateY(0) scale(1);
            }

            to {
                transform: translateY(-100px) scale(0.8);
            }
        }

        @keyframes santaPop {
            from {
                opacity: 0;
                transform: translateY(50px) scale(0.8);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .title-enter {
            animation: fadeInCenter 1s ease-out forwards;
        }

        .title-move-up {
            animation: moveUpTitle 1s ease-in-out forwards;
        }

        .santa-enter {
            opacity: 0;
            /* Initially hidden */
            animation: santaPop 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        /* Gradient Text for Timers */
        .text-gradient-red {
            background: linear-gradient(to bottom, #ff9a9e, #ff0000);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }

        .text-gradient-normal {
            background: linear-gradient(to bottom, #fff, #ddd);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
    </style>
</head>

<body>

    <!-- Background Elements (Snow, Trees) -->
    <div class="bg-decorations">
        <div class="snow-container" id="snowContainer"></div>
        <img src="elka1.png" class="decor elka elka-left" alt="">
        <img src="elka2.png" class="decor elka elka-right" alt="">
    </div>



    <!-- 1. Initial Loading Screen with Ded Moroz -->
    <section id="screen-loading" class="screen active-screen">
        <div class="content-center">
            <h1 class="main-title">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π<br>–ú–∞—Ä–∞—Ñ–æ–Ω</h1>
            <div class="ded-container">
                <img src="dedprivet.png" alt="–î–µ–¥ –ú–æ—Ä–æ–∑" class="ded-img bounce-in">
                <div class="speech-bubble fade-in-delay">
                    <p>–≠—Ç–æ—Ç –ù–æ–≤—ã–π –≥–æ–¥ –Ω–µ –±—É–¥–µ—Ç —Å–∫—É—á–Ω—ã–º! –Ø –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –¥–ª—è –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –∏–≥—Ä—ã –∏ –∫—Ä—É—Ç—ã–µ –Ω–∞–≥—Ä–∞–¥—ã!</p>
                </div>
            </div>
            <button id="btn-start-adventure" class="btn-main pulse-btn">–ù–∞—á–∞—Ç—å –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–µ</button>
            <div class="footer-credits" style="margin-top: 20px; font-size: 0.8rem; opacity: 0.7;">–°–æ–∑–¥–∞–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π
                DexStars</div>
        </div>
    </section>

    <!-- 2. Main Menu (Game List) -->
    <section id="screen-menu" class="screen">
        <header class="app-header">
            <div class="header-titles">
                <h1 class="menu-title-small">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –ú–∞—Ä–∞—Ñ–æ–Ω</h1>
                <h2>–ú–∏–Ω–∏-–ò–≥—Ä—ã</h2>
            </div>
            <div class="header-controls" style="display: flex; gap: 10px; align-items: center;">


                <div class="balance-container">
                    <span id="user-balance">0</span>
                    <img src="zima.png" alt="Valuta" class="currency-icon">
                </div>
            </div>
        </header>

        <div class="games-grid">
            <!-- Game 1: Starfall -->
            <div class="game-card" id="card-starfall">
                <div class="card-level-badge">Lvl <span id="menu-starfall-level">1</span></div>
                <div class="card-image">
                    <img src="star.png" alt="–ó–≤–µ–∑–¥–æ–ø–∞–¥" loading="lazy">
                </div>
                <div class="card-info">
                    <h3>–ó–≤–µ–∑–¥–æ–ø–∞–¥</h3>
                    <p>–°–æ–±–µ—Ä–∏ –∑–≤–µ–∑–¥—ã –≤ —Ä–æ–∂–¥–µ—Å—Ç–≤–µ–Ω—Å–∫–∏–π –Ω–æ—Å–æ–∫!</p>
                    <div class="card-actions">
                        <div class="card-status" id="timer-starfall">–ò–≥—Ä–∞—Ç—å</div>
                        <button id="btn-rules-starfall" class="btn-rules">?</button>
                    </div>
                </div>
            </div>

            <!-- Game 2: Roulette -->
            <div class="game-card roulette-card" id="card-roulette">
                <div class="card-image">
                    <img src="cas.jpg" alt="–†—É–ª–µ—Ç–∫–∞" onerror="this.src='star.png'" loading="lazy">
                </div>
                <div class="card-info">
                    <h3>–†—É–ª–µ—Ç–∫–∞</h3>
                    <p>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –±–æ–Ω—É—Å!</p>
                    <div class="card-actions">
                        <div class="card-status" id="timer-roulette">–ö—Ä—É—Ç–∏—Ç—å</div>
                    </div>
                </div>
            </div>

            <!-- Game 3: Guess the Cup -->
            <div class="game-card" id="card-cups">
                <div class="card-level-badge">Lvl <span id="menu-cups-level">1</span></div>
                <div class="card-image">
                    <img src="ygadai.png" alt="–£–≥–∞–¥–∞–π" onerror="this.src='sk1.png'" loading="lazy">
                </div>
                <div class="card-info">
                    <h3>–£–≥–∞–¥–∞–π –°—Ç–∞–∫–∞–Ω—á–∏–∫</h3>
                    <p>–ì–¥–µ —Å–ø—Ä—è—Ç–∞–Ω –ª–µ–¥–µ–Ω–µ—Ü?</p>
                    <div class="card-actions">
                        <div class="card-status" id="timer-cups">–ò–≥—Ä–∞—Ç—å</div>
                        <button id="btn-rules-cups" class="btn-rules">?</button>
                    </div>
                </div>
            </div>

            <!-- Game 4: Snowball -->


            <!-- Shop (Placeholder) -->
            <!-- Shop -->

        </div>


        </div>

    </section>

    <!-- 2.1 Profile Section -->
    <section id="screen-profile" class="screen">
        <div class="content-center profile-wrapper">
            <h2 class="page-title">–ü—Ä–æ—Ñ–∏–ª—å</h2>

            <div class="profile-user-info">
                <div class="avatar-circle">
                    <img src="sk1.png" alt="Avatar" class="profile-avatar-img">
                </div>
                <h3 class="profile-username">–ò–≥—Ä–æ–∫</h3>
            </div>

            <div class="profile-balance-card">
                <div class="pbc-header">
                    <span class="pbc-label">–ë–∞–ª–∞–Ω—Å Stars</span>
                </div>
                <div class="pbc-row">
                    <div class="pbc-value">
                        <img src="star.png" class="pbc-icon"> <span id="profile-balance-display">0</span>
                    </div>
                    <button class="btn-deposit">–ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
                </div>
                <div class="pbc-wallet-icon">
                    <!-- Icon placeholder -->
                </div>
            </div>

            <div class="profile-menu">
                <div class="profile-menu-item" id="btn-sound-profile-toggle">
                    <div class="pmi-left">
                        <img id="profile-sound-icon" src="zv.png" alt="Sound"
                            style="width: 24px; height: 24px; object-fit: contain; margin-right: 10px;">
                        <span>–ó–≤—É–∫</span>
                    </div>
                    <div class="toggle-switch" id="ui-sound-toggle">
                        <div class="toggle-knob"></div>
                    </div>
                </div>
                <div class="profile-menu-item">
                    <div class="pmi-left">
                        <span class="pmi-icon">üë•</span>
                        <span>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</span>
                    </div>
                    <span class="pmi-arrow">></span>
                </div>
                <div class="profile-menu-item">
                    <div class="pmi-left">
                        <span class="pmi-icon">üí¨</span>
                        <span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                    </div>
                    <span class="pmi-arrow">></span>
                </div>
            </div>
        </div>
    </section>

    <!-- 2.2 Ranking Section -->
    <!-- 2.2 Ranking Section -->
    <section id="screen-ranking" class="screen">
        <div class="content-center ranking-wrapper">
            <h2 class="page-title">–†–µ–π—Ç–∏–Ω–≥</h2>
            <div class="season-timer-pill">9–¥: 04—á: 09–º: 52—Å</div>

            <div class="leaderboard-header">
                <span>Place</span>
                <span>Stars Volume</span>
            </div>

            <div class="leaderboard-list" id="leaderboard-list">
                <!-- JS will populate -->
            </div>

            <!-- Current User Sticky Rank -->
            <div class="current-user-rank" id="current-user-rank-display">
                <!-- JS will populate -->
            </div>
        </div>
    </section>

    <!-- 2.3 Shop Section -->
    <!-- 2.3 Shop Section -->
    <section id="screen-shop" class="screen">
        <div class="content-center shop-wrapper">
            <h2 class="page-title">–ú–∞–≥–∞–∑–∏–Ω</h2>

            <div class="shop-coming-soon">
                <div class="shop-icon-large">
                    <img src="mag.png" alt="Shop">
                </div>
                <h3 class="neon-text-premium">–°–∫–æ—Ä–æ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –º–∞–≥–∞–∑–∏–Ω!!!</h3>
                <p>–ú—ã –≥–æ—Ç–æ–≤–∏–º –¥–ª—è –≤–∞—Å —á—Ç–æ-—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ!</p>
            </div>
        </div>
    </section>

    <!-- Bottom Navigation -->
    <nav id="bottom-nav" class="bottom-nav">
        <div class="nav-indicator"></div>
        <div class="nav-item" data-target="profile">
            <div class="nav-icon"><img src="prof.png" alt="–ü—Ä–æ—Ñ–∏–ª—å"></div>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
        <div class="nav-item active" data-target="menu">
            <div class="nav-icon"><img src="game.png" alt="–ò–≥—Ä—ã"></div>
            <span>–ò–≥—Ä—ã</span>
        </div>
        <div class="nav-item" data-target="shop">
            <div class="nav-icon"><img src="mag.png" alt="–ú–∞–≥–∞–∑–∏–Ω" style="border-radius: 50%;"></div>
            <span>–ú–∞–≥–∞–∑–∏–Ω</span>
        </div>
        <div class="nav-item" data-target="ranking">
            <div class="nav-icon"><img src="reyt.png" alt="–†–µ–π—Ç–∏–Ω–≥"></div>
            <span>–†–µ–π—Ç–∏–Ω–≥</span>
        </div>
    </nav>

    <!-- Rules Modal -->
    <div id="modal-rules" class="modal-overlay">
        <div class="modal-content">
            <h3 id="rules-title">–ü—Ä–∞–≤–∏–ª–∞ –∏–≥—Ä—ã</h3>
            <div id="rules-text" class="rules-body">
                <!-- Text injected by JS -->
            </div>
            <button id="btn-close-rules" class="btn-nice small-btn">–ü–æ–Ω—è—Ç–Ω–æ</button>
        </div>
    </div>

    <!-- 3. Game Preloader -->
    <section id="screen-game-loader" class="screen">
        <div class="content-center">
            <div class="spinner-holiday">
                <img src="star.png" class="spin-star">
            </div>
            <h3>–ì–æ—Ç–æ–≤–∏–º —Å–∞–Ω–∏...</h3>
            <p id="game-tip">–°–æ–≤–µ—Ç: –õ–æ–≤–∏ —Ç–æ–ª—å–∫–æ –∑–≤–µ–∑–¥—ã!</p>
        </div>
    </section>

    <!-- 4. Game Screen: Starfall -->
    <section id="screen-game" class="screen">
        <div id="game-countdown" class="game-countdown"></div>
        <div class="glass-header">
            <div class="gh-item">
                <!-- Score & Target -->
                <span>–ó–≤–µ–∑–¥—ã</span>
                <div class="gh-value">
                    <span id="game-score">0</span> / <span id="game-target">50</span>
                </div>
            </div>
            <div class="gh-item">
                <span id="game-time" class="gh-timer">60</span>
            </div>
            <div class="gh-item">
                <span>Lvl</span>
                <span id="game-level" class="gh-value">1</span>
            </div>
        </div>
        <canvas id="gameCanvas"></canvas>
        <div class="controls-hint">–î–≤–∏–≥–∞–π –ø–∞–ª—å—Ü–µ–º –∏–ª–∏ –º—ã—à–∫–æ–π</div>
    </section>



    <!-- 4.5 Snowball Screen -->


    <!-- 5. Result Screen -->
    <section id="screen-result" class="screen">
        <div class="content-center">
            <h2 id="result-title">–ü–æ–±–µ–¥–∞!</h2>

            <div class="ded-result-container">
                <img id="result-ded-img" src="dedpobeda.png" alt="Result Ded" class="ded-img">
            </div>

            <div class="result-message-box">
                <p id="result-message">–¢—ã —Å–æ–±—Ä–∞–ª –≤—Å–µ –∑–≤–µ–∑–¥—ã! –î–µ—Ä–∂–∏ –Ω–∞–≥—Ä–∞–¥—É.</p>
                <div id="reward-box" class="reward-box">
                    <span>+10</span> <img src="zima.png" class="currency-icon">
                </div>
            </div>

            <div class="result-actions">
                <button id="btn-result-menu" class="btn-main">–í –º–µ–Ω—é</button>
                <button id="btn-next-level" class="btn-main pulse-btn" style="display: none;">–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å</button>
            </div>
        </div>
    </section>

    <!-- 6. Roulette Screen -->
    <section id="screen-roulette" class="screen">
        <div class="content-center">
            <h2 class="roulette-title">–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –†—É–ª–µ—Ç–∫–∞</h2>
            <p
                style="color: rgba(255,255,255,0.8); font-size: 0.9rem; margin-bottom: 20px; max-width: 300px; margin: 0 auto;">
                –ö—Ä—É—Ç–∏ —Ä—É–ª–µ—Ç–∫—É –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –∏ –ø—ã—Ç–∞–π —Å–≤–æ—é —É–¥–∞—á—É! –í—ã–∏–≥—Ä—ã–≤–∞–π —Ü–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑—ã –∏ –ª–æ–≤–∏ —Å–Ω–µ–∂–∏–Ω–∫–∏!
            </p>
            <div class="roulette-container">
                <div class="roulette-pointer"></div>
                <div class="roulette-track" id="roulette-track">
                    <!-- Items injected by JS -->
                </div>
            </div>
            <button id="btn-spin" class="btn-glass-action pulse-btn">–ö–†–£–¢–ò–¢–¨!</button>
            <div id="roulette-timer-display" class="timer-display" style="display: none;"></div>
            <button id="btn-roulette-back" class="btn-main tiny-btn secondary-action">–ù–∞–∑–∞–¥</button>
        </div>
    </section>

    <!-- 7. Cups Game Screens -->
    <!-- Intro/Rules -->
    <section id="screen-cups-intro" class="screen">
        <div class="content-center">
            <h2 class="main-title" style="font-size: 2.5rem;">–£–≥–∞–¥–∞–π –°—Ç–∞–∫–∞–Ω—á–∏–∫</h2>
            <div class="ded-container">
                <img src="dedprivet.png" class="ded-img" style="width: 180px;">
                <div class="speech-bubble fade-in-delay">
                    <p>–Ø —Å–ø—Ä—è—á—É —É–≥–æ—â–µ–Ω–∏–µ –ø–æ–¥ –æ–¥–Ω–∏–º –∏–∑ —Å—Ç–∞–∫–∞–Ω—á–∏–∫–æ–≤. –°–ª–µ–¥–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, —è –±—É–¥—É –∏—Ö –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—Ç—å! –£–≥–∞–¥–∞–π 3
                        —Ä–∞–∑–∞ –∏ –ø–æ–ª—É—á–∏ –Ω–∞–≥—Ä–∞–¥—É!</p>
                </div>
            </div>
            <div class="rules-list"
                style="text-align: left; background: rgba(0,0,0,0.5); padding: 15px; border-radius: 15px; margin: 15px 0; font-size: 0.9rem;">
                <p>‚ùÑÔ∏è 12 –£—Ä–æ–≤–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏</p>
                <p>‚ùÑÔ∏è 3 –†–∞—É–Ω–¥–∞ –≤ –∫–∞–∂–¥–æ–π –∏–≥—Ä–µ</p>
                <p>‚ùÑÔ∏è –ß–µ–º –≤—ã—à–µ —É—Ä–æ–≤–µ–Ω—å, —Ç–µ–º –±–æ–ª—å—à–µ –Ω–∞–≥—Ä–∞–¥–∞!</p>
            </div>
            <button id="btn-start-cups" class="btn-nice pulse-btn">–ù–∞—á–∞—Ç—å –ò–≥—Ä—É</button>
            <button id="btn-cups-back" class="btn-nice secondary small-btn" style="margin-top: 10px;">–ù–∞–∑–∞–¥</button>
        </div>
    </section>

    <!-- Game Area -->
    <section id="screen-cups-game" class="screen">
        <div class="glass-header">
            <div class="gh-item">
                <span>–†–∞—É–Ω–¥</span>
                <span id="cups-round" class="gh-value">1/3</span>
            </div>
            <div class="gh-item">
                <span id="cups-time" class="gh-timer">10</span>
            </div>
            <div class="gh-item">
                <span>Lvl</span>
                <span id="cups-level-display" class="gh-value">1</span>
            </div>
        </div>

        <div class="content-center" style="justify-content: flex-start; padding-top: 50px;">
            <div id="cups-area" class="cups-area">
                <!-- Injected by JS -->
            </div>
            <div id="cups-message" class="controls-hint" style="margin-top: 30px;">–°–ª–µ–¥–∏ –∑–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–º!</div>

            <div id="btn-cups-hint" class="btn-round-hint">
                <img src="pods.png">
                <div class="hint-badge" id="cups-hint-count">0</div>
            </div>
        </div>
    </section>

    <!-- 7. Roulette Reward Modal -->
    <div id="modal-roulette-reward" class="modal-overlay">
        <div class="modal-content modern-modal">
            <h3 class="modal-title-modern">–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h3>
            <div id="roulette-reward-display" class="reward-display-modern">
                <!-- Icon and Text -->
            </div>
            <div class="roulette-actions">
                <button id="btn-claim-reward" class="btn-main small-btn">–ó–∞–±—Ä–∞—Ç—å</button>
                <button id="btn-sell-reward" class="btn-main small-btn" style="background: #4a5568;">–ü—Ä–æ–¥–∞—Ç—å (+<span
                        id="sell-price">0</span>)</button>
            </div>
        </div>
    </div>

    <!-- 8. Cups Round Result Overlay -->
    <div id="cups-round-result" class="modal-overlay" style="z-index: 150;">
        <div class="modal-content" style="background: rgba(15, 22, 38, 0.95); border: 2px solid #ffd700;">
            <h3 id="cups-round-title" style="margin-bottom: 15px; color: #ffd700;"></h3>
            <img id="cups-round-img" style="width: 120px; height: auto; animation: dedBreath 2s infinite;">
            <p id="cups-round-msg" style="margin-top: 15px; font-weight: bold; font-size: 1.1rem;"></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>