<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Новогодний Марафон</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Pacifico&display=swap"
        rel="stylesheet">
</head>

<body>

    <!-- Background Elements (Snow, Trees) -->
    <div class="bg-decorations">
        <div class="snow-container" id="snowContainer"></div>
        <img src="elka1.png" class="decor elka elka-left" alt="">
        <img src="elka2.png" class="decor elka elka-right" alt="">
    </div>

    <!-- 1. Initial Loading Screen with Ded Moroz -->
    <section id="screen-loading" class="screen active-screen">
        <div class="content-center">
            <h1 class="main-title">Новогодний<br>Марафон</h1>
            <div class="ded-container">
                <img src="dedprivet.png" alt="Дед Мороз" class="ded-img bounce-in">
                <div class="speech-bubble fade-in-delay">
                    <p>Этот Новый год не будет скучным! Я подготовил для вас интересные игры и крутые награды!</p>
                </div>
            </div>
            <button id="btn-start-adventure" class="btn-main pulse-btn">Начать приключение</button>
            <div class="footer-credits" style="margin-top: 20px; font-size: 0.8rem; opacity: 0.7;">Создано командой
                DexStars</div>
        </div>
    </section>

    <!-- 2. Main Menu (Game List) -->
    <section id="screen-menu" class="screen">
        <header class="app-header">
            <div class="header-titles">
                <h1 class="menu-title-small">Новогодний Марафон</h1>
                <h2>Мини-Игры</h2>
            </div>
            <div class="header-controls" style="display: flex; gap: 10px; align-items: center;">


                <div class="balance-container">
                    <span id="user-balance">0</span>
                    <img src="zima.png" alt="Valuta" class="currency-icon">
                </div>
            </div>
        </header>

        <div class="games-grid">
            <!-- Game 1: Starfall -->
            <div class="game-card" id="card-starfall">
                <div class="card-level-badge">Lvl <span id="menu-starfall-level">1</span></div>
                <div class="card-image">
                    <img src="star.png" alt="Звездопад">
                </div>
                <div class="card-info">
                    <h3>Звездопад</h3>
                    <p>Собери звезды в рождественский носок!</p>
                    <div class="card-actions">
                        <div class="card-status" id="timer-starfall">Играть</div>
                        <button id="btn-rules-starfall" class="btn-rules">?</button>
                    </div>
                </div>
            </div>

            <!-- Game 2: Roulette -->
            <div class="game-card roulette-card" id="card-roulette">
                <div class="card-image">
                    <img src="cas.jpg" alt="Рулетка" onerror="this.src='star.png'">
                </div>
                <div class="card-info">
                    <h3>Рулетка</h3>
                    <p>Ежедневный бонус!</p>
                    <div class="card-actions">
                        <div class="card-status" id="timer-roulette">Крутить</div>
                    </div>
                </div>
            </div>

            <!-- Game 3: Guess the Cup -->
            <div class="game-card" id="card-cups">
                <div class="card-level-badge">Lvl <span id="menu-cups-level">1</span></div>
                <div class="card-image">
                    <img src="ygadai.png" alt="Угадай" onerror="this.src='sk1.png'">
                </div>
                <div class="card-info">
                    <h3>Угадай Стаканчик</h3>
                    <p>Где спрятан леденец?</p>
                    <div class="card-actions">
                        <div class="card-status" id="timer-cups">Играть</div>
                        <button id="btn-rules-cups" class="btn-rules">?</button>
                    </div>
                </div>
            </div>

            <!-- Game 4: Snowball -->


            <!-- Shop (Placeholder) -->
            <div class="game-card locked">
                <div class="card-image grayscale">
                    <img src="ava2.png" alt="Магазин">
                </div>
                <div class="card-info">
                    <h3>Магазин</h3>
                    <p>Скоро открытие...</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Rules Modal -->
    <div id="modal-rules" class="modal-overlay">
        <div class="modal-content">
            <h3 id="rules-title">Правила игры</h3>
            <div id="rules-text" class="rules-body">
                <!-- Text injected by JS -->
            </div>
            <button id="btn-close-rules" class="btn-nice small-btn">Понятно</button>
        </div>
    </div>

    <!-- 3. Game Preloader -->
    <section id="screen-game-loader" class="screen">
        <div class="content-center">
            <div class="spinner-holiday">
                <img src="star.png" class="spin-star">
            </div>
            <h3>Готовим сани...</h3>
            <p id="game-tip">Совет: Лови только звезды!</p>
        </div>
    </section>

    <!-- 4. Game Screen: Starfall -->
    <section id="screen-game" class="screen">
        <div id="game-countdown" class="game-countdown"></div>
        <div class="glass-header">
            <div class="gh-item">
                <!-- Score & Target -->
                <span>Звезды</span>
                <div class="gh-value">
                    <span id="game-score">0</span> / <span id="game-target">50</span>
                </div>
            </div>
            <div class="gh-item">
                <span id="game-time" class="gh-timer">60</span>
            </div>
            <div class="gh-item">
                <span>Lvl</span>
                <span id="game-level" class="gh-value">1</span>
            </div>
        </div>
        <canvas id="gameCanvas"></canvas>
        <div class="controls-hint">Двигай пальцем или мышкой</div>
    </section>



    <!-- 4.5 Snowball Screen -->


    <!-- 5. Result Screen -->
    <section id="screen-result" class="screen">
        <div class="content-center">
            <h2 id="result-title">Победа!</h2>

            <div class="ded-result-container">
                <img id="result-ded-img" src="dedpobeda.png" alt="Result Ded" class="ded-img">
            </div>

            <div class="result-message-box">
                <p id="result-message">Ты собрал все звезды! Держи награду.</p>
                <div id="reward-box" class="reward-box">
                    <span>+10</span> <img src="zima.png" class="currency-icon">
                </div>
            </div>

            <div class="result-actions">
                <button id="btn-result-menu" class="btn-main">В меню</button>
                <button id="btn-next-level" class="btn-main pulse-btn" style="display: none;">Следующий уровень</button>
            </div>
        </div>
    </section>

    <!-- 6. Roulette Screen -->
    <section id="screen-roulette" class="screen">
        <div class="content-center">
            <h2 class="roulette-title">Ежедневная Рулетка</h2>
            <p
                style="color: rgba(255,255,255,0.8); font-size: 0.9rem; margin-bottom: 20px; max-width: 300px; margin: 0 auto;">
                Крути рулетку каждый день и пытай свою удачу! Выигрывай ценные призы, но берегись какашек!
            </p>
            <div class="roulette-container">
                <div class="roulette-pointer"></div>
                <div class="roulette-track" id="roulette-track">
                    <!-- Items injected by JS -->
                </div>
            </div>
            <button id="btn-spin" class="btn-glass-action pulse-btn">КРУТИТЬ!</button>
            <div id="roulette-timer-display" class="timer-display" style="display: none;"></div>
            <button id="btn-roulette-back" class="btn-main tiny-btn secondary-action">Назад</button>
        </div>
    </section>

    <!-- 7. Cups Game Screens -->
    <!-- Intro/Rules -->
    <section id="screen-cups-intro" class="screen">
        <div class="content-center">
            <h2 class="main-title" style="font-size: 2.5rem;">Угадай Стаканчик</h2>
            <div class="ded-container">
                <img src="dedprivet.png" class="ded-img" style="width: 180px;">
                <div class="speech-bubble fade-in-delay">
                    <p>Я спрячу угощение под одним из стаканчиков. Следи внимательно, я буду их перемешивать! Угадай 3
                        раза и получи награду!</p>
                </div>
            </div>
            <div class="rules-list"
                style="text-align: left; background: rgba(0,0,0,0.5); padding: 15px; border-radius: 15px; margin: 15px 0; font-size: 0.9rem;">
                <p>❄️ 12 Уровней сложности</p>
                <p>❄️ 3 Раунда в каждой игре</p>
                <p>❄️ Чем выше уровень, тем больше награда!</p>
            </div>
            <button id="btn-start-cups" class="btn-nice pulse-btn">Начать Игру</button>
            <button id="btn-cups-back" class="btn-nice secondary small-btn" style="margin-top: 10px;">Назад</button>
        </div>
    </section>

    <!-- Game Area -->
    <section id="screen-cups-game" class="screen">
        <div class="glass-header">
            <div class="gh-item">
                <span>Раунд</span>
                <span id="cups-round" class="gh-value">1/3</span>
            </div>
            <div class="gh-item">
                <span id="cups-time" class="gh-timer">10</span>
            </div>
            <div class="gh-item">
                <span>Lvl</span>
                <span id="cups-level-display" class="gh-value">1</span>
            </div>
        </div>

        <div class="content-center" style="justify-content: flex-start; padding-top: 50px;">
            <div id="cups-area" class="cups-area">
                <!-- Injected by JS -->
            </div>
            <div id="cups-message" class="controls-hint" style="margin-top: 30px;">Следи за предметом!</div>

            <div id="btn-cups-hint" class="btn-round-hint">
                <img src="pods.png">
                <div class="hint-badge" id="cups-hint-count">0</div>
            </div>
        </div>
    </section>

    <!-- 7. Roulette Reward Modal -->
    <div id="modal-roulette-reward" class="modal-overlay">
        <div class="modal-content modern-modal">
            <h3 class="modal-title-modern">Поздравляем!</h3>
            <div id="roulette-reward-display" class="reward-display-modern">
                <!-- Icon and Text -->
            </div>
            <div class="roulette-actions">
                <button id="btn-claim-reward" class="btn-main small-btn">Забрать</button>
                <button id="btn-sell-reward" class="btn-main small-btn" style="background: #4a5568;">Продать (+<span
                        id="sell-price">0</span>)</button>
            </div>
        </div>
    </div>

    <!-- 8. Cups Round Result Overlay -->
    <div id="cups-round-result" class="modal-overlay" style="z-index: 150;">
        <div class="modal-content" style="background: rgba(15, 22, 38, 0.95); border: 2px solid #ffd700;">
            <h3 id="cups-round-title" style="margin-bottom: 15px; color: #ffd700;"></h3>
            <img id="cups-round-img" style="width: 120px; height: auto; animation: dedBreath 2s infinite;">
            <p id="cups-round-msg" style="margin-top: 15px; font-weight: bold; font-size: 1.1rem;"></p>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>